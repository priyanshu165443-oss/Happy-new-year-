<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy New Year!</title>
  <meta name="description" content="Happy New Year card with fireworks and a warm wish." />
  <style>
    /* Base reset */
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; }
    html,body { height: 100%; }
    body {
      height: 100vh;
      overflow: hidden;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Canvas fullscreen */
    canvas#fireworksCanvas {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none; /* allow clicks through to UI */
      display: block;
    }

    /* Content */
    .container {
      position: relative;
      z-index: 2;
      text-align: center;
      padding: 2rem;
      max-width: 900px;
      width: 100%;
      animation: fadeIn 900ms ease-in-out;
    }
    h1 {
      font-size: clamp(2.2rem, 4vw, 3.5rem);
      margin-bottom: 0.5rem;
      animation: glow 2s infinite alternate;
    }
    h2 { font-size: clamp(1.4rem, 2.6vw, 2.2rem); margin-bottom: .4rem; font-weight: 600; }
    p { font-size: clamp(.95rem, 1.6vw, 1.2rem); opacity: .95; line-height: 1.4; }
    .year {
      font-size: clamp(2.6rem, 8vw, 5rem);
      font-weight: 800;
      margin-top: 1rem;
      color: #ffd700;
      letter-spacing: 1px;
    }
    .footer { margin-top: 1.25rem; font-size: 0.9rem; opacity: 0.78; }

    /* Controls */
    .controls {
      margin-top: 1.25rem;
      display: flex;
      gap: 0.5rem;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
    }
    button {
      background: rgba(255,255,255,0.08);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.12);
      padding: 0.6rem 0.9rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: transform .12s ease, background .12s ease;
    }
    button:focus { outline: 3px solid rgba(255,215,0,0.18); outline-offset: 4px; }
    button:hover { transform: translateY(-3px); background: rgba(255,255,255,0.10); }

    /* Keyframes */
    @keyframes glow {
      from { text-shadow: 0 0 10px #ffcc00, 0 0 20px #ffcc00; }
      to   { text-shadow: 0 0 20px #ff6600, 0 0 40px #ff6600; }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(12px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* Reduce motion support */
    @media (prefers-reduced-motion: reduce) {
      .container { animation: none; }
      h1 { animation: none; text-shadow: none; }
      canvas#fireworksCanvas { display: none; }
    }

    /* Small screens spacing */
    @media (max-width: 420px) {
      .container { padding: 1rem; }
      .controls { gap: .4rem; }
    }

    /* Decorative static starfield for reduced-motion fallback */
    .starfield {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      background-image:
        radial-gradient(rgba(255,255,255,0.12) 1px, transparent 1px),
        radial-gradient(rgba(255,255,255,0.07) 1px, transparent 1px);
      background-size: 200px 200px, 80px 80px;
      opacity: 0.08;
    }

  </style>
</head>
<body>
  <!-- Canvas for fireworks (hidden when reduced-motion is requested) -->
  <canvas id="fireworksCanvas" aria-hidden="true"></canvas>

  <!-- Static starfield shown when animations are reduced -->
  <div class="starfield" aria-hidden="true" style="display:none"></div>

  <main class="container" role="main" aria-labelledby="greeting">
    <h1 id="greeting">ðŸŽ‰ Happy New Year ðŸŽ‰</h1>
    <h2>Dear Gaurish,</h2>
    <p>May this new year bring you happiness, success, good health,<br />and countless reasons to smile.</p>

    <div class="year" id="year">2026</div>

    <div class="controls" role="group" aria-label="Card controls">
      <button id="burstBtn" title="Create a fireworks burst">Burst Fireworks</button>
      <button id="autoToggleBtn" title="Toggle automatic fireworks">Pause Auto</button>
    </div>

    <div class="footer" aria-live="polite">Wishing you a bright and amazing year ahead âœ¨</div>
  </main>

  <script>
    // Respect prefers-reduced-motion
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const canvas = document.getElementById('fireworksCanvas');
    const starfield = document.querySelector('.starfield');

    if (prefersReduced) {
      // Hide canvas and show subtle static starfield
      canvas.style.display = 'none';
      starfield.style.display = 'block';
    } else {
      starfield.style.display = 'none';
      canvas.style.display = 'block';
    }

    // Set year dynamically to next calendar year
    (function setYear() {
      const yearEl = document.getElementById('year');
      const now = new Date();
      const nextYear = now.getFullYear() + 1;
      yearEl.textContent = nextYear;
    })();

    if (!prefersReduced) {
      // Canvas sizing
      const ctx = canvas.getContext('2d');
      let w = canvas.width = innerWidth * devicePixelRatio;
      let h = canvas.height = innerHeight * devicePixelRatio;
      canvas.style.width = innerWidth + 'px';
      canvas.style.height = innerHeight + 'px';
      ctx.scale(devicePixelRatio, devicePixelRatio);

      window.addEventListener('resize', () => {
        w = canvas.width = innerWidth * devicePixelRatio;
        h = canvas.height = innerHeight * devicePixelRatio;
        canvas.style.width = innerWidth + 'px';
        canvas.style.height = innerHeight + 'px';
        ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
      });

      // Particle system
      const particles = [];
      const gravity = 0.02;
      const friction = 0.985;

      function rand(min, max) { return Math.random() * (max - min) + min; }
      function hslToCss(h, s, l) { return 'hsl(' + h + ',' + s + '%,' + l + '%)'; }

      class Particle {
        constructor(x, y, vx, vy, hue, size, life, decay) {
          this.x = x; this.y = y;
          this.vx = vx; this.vy = vy;
          this.hue = hue;
          this.size = size;
          this.life = life; // remaining life
          this.maxLife = life;
          this.decay = decay;
        }
        update() {
          this.vx *= friction;
          this.vy *= friction;
          this.vy += gravity;
          this.x += this.vx;
          this.y += this.vy;
          this.life -= this.decay;
        }
        draw(ctx) {
          const alpha = Math.max(0, this.life / this.maxLife);
          ctx.save();
          ctx.globalCompositeOperation = 'lighter';
          ctx.beginPath();
          const radius = Math.max(0.4, this.size * alpha);
          const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, radius * 4);
          gradient.addColorStop(0, `hsla(${this.hue}, 100%, 70%, ${alpha})`);
          gradient.addColorStop(0.5, `hsla(${this.hue}, 90%, 60%, ${alpha * 0.6})`);
          gradient.addColorStop(1, `hsla(${this.hue}, 90%, 40%, 0)`);
          ctx.fillStyle = gradient;
          ctx.arc(this.x, this.y, radius, 0, Math.PI * 2);
          ctx.fill();
          ctx.restore();
        }
        isAlive() { return this.life > 0 && this.size > 0.1; }
      }

      function burst(x, y, hue, count = 40) {
        for (let i = 0; i < count; i++) {
          const angle = Math.random() * Math.PI * 2;
          const speed = rand(1.8, 5.4);
          const vx = Math.cos(angle) * speed;
          const vy = Math.sin(angle) * speed;
          const size = rand(1.2, 3.8);
          const life = rand(40, 90);
          const decay = rand(0.8, 1.6);
          particles.push(new Particle(x, y, vx, vy, hue + rand(-20, 20), size, life, decay));
        }
      }

      // Ambient sparks from lower area for more depth
      function ambientSpark() {
        const x = rand(innerWidth * 0.1, innerWidth * 0.9);
        const y = innerHeight + 10;
        const vx = rand(-0.6, 0.6);
        const vy = rand(-6.8, -4.2);
        const hue = rand(200, 50);
        particles.push(new Particle(x, y, vx, vy, hue, rand(1,2), rand(30,70), rand(0.3, 0.9)));
      }

      // Animation loop
      let autoFire = true;
      let lastAuto = 0;
      let lastTime = performance.now();

      function frame(now) {
        const dt = now - lastTime;
        lastTime = now;

        // fade background slightly to create trails
        ctx.clearRect(0,0,innerWidth,innerHeight);
        // Draw subtle gradient night-sky overlay for depth
        const grad = ctx.createLinearGradient(0,0,0,innerHeight);
        grad.addColorStop(0, 'rgba(20,30,40,0.15)');
        grad.addColorStop(1, 'rgba(0,0,0,0.25)');
        ctx.fillStyle = grad;
        ctx.fillRect(0,0,innerWidth,innerHeight);

        // spawn ambient sparks intermittently
        if (Math.random() < 0.03) ambientSpark();

        // auto bursts occasionally
        if (autoFire && now - lastAuto > rand(700, 1600)) {
          const x = rand(innerWidth * 0.15, innerWidth * 0.85);
          const y = rand(innerHeight * 0.12, innerHeight * 0.55);
          burst(x, y, rand(20, 330), Math.floor(rand(30, 70)));
          lastAuto = now;
        }

        // update and draw particles
        for (let i = particles.length - 1; i >= 0; i--) {
          const p = particles[i];
          p.update();
          if (!p.isAlive()) particles.splice(i, 1);
          else p.draw(ctx);
        }

        // slight vignette for polish
        ctx.save();
        ctx.globalCompositeOperation = 'source-over';
        ctx.beginPath();
        ctx.fillStyle = 'rgba(0,0,0,0.15)';
        ctx.fillRect(0,0,innerWidth,innerHeight);
        ctx.restore();

        requestAnimationFrame(frame);
      }

      requestAnimationFrame(frame);

      // User controls
      const burstBtn = document.getElementById('burstBtn');
      const autoToggleBtn = document.getElementById('autoToggleBtn');

      burstBtn.addEventListener('click', () => {
        // create a burst near the center-top area
        const x = rand(innerWidth * 0.25, innerWidth * 0.75);
        const y = rand(innerHeight * 0.18, innerHeight * 0.45);
        burst(x, y, rand(20, 330), Math.floor(rand(40, 90)));
      });

      autoToggleBtn.addEventListener('click', () => {
        autoFire = !autoFire;
        autoToggleBtn.textContent = autoFire ? 'Pause Auto' : 'Resume Auto';
      });

      // Clicking anywhere performs a burst at click position
      window.addEventListener('pointerdown', (ev) => {
        // ignore clicks targeted at buttons (so button click behavior remains)
        const t = ev.target;
        if (t.tagName && (t.tagName.toLowerCase() === 'button')) return;
        const rect = canvas.getBoundingClientRect();
        const x = ev.clientX - rect.left;
        const y = ev.clientY - rect.top;
        burst(x, y, rand(0, 360), Math.floor(rand(30,80)));
      });

      // Keyboard accessibility for burst button (space/enter handled by default)
    } // end reduced-motion conditional
  </script>
</body>
</html>